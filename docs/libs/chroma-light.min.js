/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */

var t=(t,r=0,e=1)=>t<r?r:t>e?e:t;const r={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])r[`[object ${t}]`]=t.toLowerCase();function e(t){return r[Object.prototype.toString.call(t)]||"object"}var n=(t,r=null)=>t.length>=3?Array.prototype.slice.call(t):"object"==e(t[0])&&r?r.split("").filter((r=>void 0!==t[0][r])).map((r=>t[0][r])):t[0],o=t=>{if(t.length<2)return null;const r=t.length-1;return"string"==e(t[r])?t[r].toLowerCase():null},s={format:{},autodetect:[]};class a{constructor(...r){const n=this;if("object"===e(r[0])&&r[0].constructor&&r[0].constructor===this.constructor)return r[0];let a=o(r),l=!1;if(!a){l=!0,s.sorted||(s.autodetect=s.autodetect.sort(((t,r)=>r.p-t.p)),s.sorted=!0);for(let t of s.autodetect)if(a=t.test(...r),a)break}if(!s.format[a])throw new Error("unknown format: "+r);{const e=s.format[a].apply(null,l?r:r.slice(0,-1));n._rgb=(r=>{r._clipped=!1,r._unclipped=r.slice(0);for(let e=0;e<=3;e++)e<3?((r[e]<0||r[e]>255)&&(r._clipped=!0),r[e]=t(r[e],0,255)):3===e&&(r[e]=t(r[e],0,1));return r})(e)}3===n._rgb.length&&n._rgb.push(1)}toString(){return"function"==e(this.hex)?this.hex():`[${this._rgb.join(",")}]`}}const l=(...t)=>new l.Color(...t);l.Color=a,l.version="2.6.2";const i=t=>Math.round(100*t)/100,u=(...t)=>{t=n(t,"rgba");let[r,e,o]=t;r/=255,e/=255,o/=255;const s=Math.min(r,e,o),a=Math.max(r,e,o),l=(a+s)/2;let i,u;return a===s?(i=0,u=Number.NaN):i=l<.5?(a-s)/(a+s):(a-s)/(2-a-s),r==a?u=(e-o)/(a-s):e==a?u=2+(o-r)/(a-s):o==a&&(u=4+(r-e)/(a-s)),u*=60,u<0&&(u+=360),t.length>3&&void 0!==t[3]?[u,i,l,t[3]]:[u,i,l]},{round:c}=Math,h=(...t)=>{const r=n(t,"rgba");let e=o(t)||"rgb";return"hsl"==e.substr(0,3)?((...t)=>{const r=n(t,"hsla");let e=o(t)||"lsa";return r[0]=i(r[0]||0),r[1]=i(100*r[1])+"%",r[2]=i(100*r[2])+"%","hsla"===e||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,e="hsla"):r.length=3,`${e}(${r.join(",")})`})(u(r),e):(r[0]=c(r[0]),r[1]=c(r[1]),r[2]=c(r[2]),("rgba"===e||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,e="rgba"),`${e}(${r.slice(0,"rgb"===e?3:4).join(",")})`)},{round:b}=Math,g=(...t)=>{t=n(t,"hsl");const[r,e,o]=t;let s,a,l;if(0===e)s=a=l=255*o;else{const t=[0,0,0],n=[0,0,0],i=o<.5?o*(1+e):o+e-o*e,u=2*o-i,c=r/360;t[0]=c+1/3,t[1]=c,t[2]=c-1/3;for(let r=0;r<3;r++)t[r]<0&&(t[r]+=1),t[r]>1&&(t[r]-=1),6*t[r]<1?n[r]=u+6*(i-u)*t[r]:2*t[r]<1?n[r]=i:3*t[r]<2?n[r]=u+(i-u)*(2/3-t[r])*6:n[r]=u;[s,a,l]=[b(255*n[0]),b(255*n[1]),b(255*n[2])]}return t.length>3?[s,a,l,t[3]]:[s,a,l,1]},p=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,d=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,f=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,w=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,m=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,y=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,{round:k}=Math,$=t=>{let r;if(t=t.toLowerCase().trim(),s.format.named)try{return s.format.named(t)}catch(t){}if(r=t.match(p)){const t=r.slice(1,4);for(let r=0;r<3;r++)t[r]=+t[r];return t[3]=1,t}if(r=t.match(d)){const t=r.slice(1,5);for(let r=0;r<4;r++)t[r]=+t[r];return t}if(r=t.match(f)){const t=r.slice(1,4);for(let r=0;r<3;r++)t[r]=k(2.55*t[r]);return t[3]=1,t}if(r=t.match(w)){const t=r.slice(1,5);for(let r=0;r<3;r++)t[r]=k(2.55*t[r]);return t[3]=+t[3],t}if(r=t.match(m)){const t=r.slice(1,4);t[1]*=.01,t[2]*=.01;const e=g(t);return e[3]=1,e}if(r=t.match(y)){const t=r.slice(1,4);t[1]*=.01,t[2]*=.01;const e=g(t);return e[3]=+r[4],e}};$.test=t=>p.test(t)||d.test(t)||f.test(t)||w.test(t)||m.test(t)||y.test(t),a.prototype.css=function(t){return h(this._rgb,t)},l.css=(...t)=>new a(...t,"css"),s.format.css=$,s.autodetect.push({p:5,test:(t,...r)=>{if(!r.length&&"string"===e(t)&&$.test(t))return"css"}});const{round:_}=Math,M=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,x=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;a.prototype.hex=function(t){return((...t)=>{let[r,e,s,a]=n(t,"rgba"),l=o(t)||"auto";void 0===a&&(a=1),"auto"===l&&(l=a<1?"rgba":"rgb"),r=_(r),e=_(e),s=_(s);let i="000000"+(r<<16|e<<8|s).toString(16);i=i.substr(i.length-6);let u="0"+_(255*a).toString(16);switch(u=u.substr(u.length-2),l.toLowerCase()){case"rgba":return`#${i}${u}`;case"argb":return`#${u}${i}`;default:return`#${i}`}})(this._rgb,t)},l.hex=(...t)=>new a(...t,"hex"),s.format.hex=t=>{if(t.match(M)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const r=parseInt(t,16);return[r>>16,r>>8&255,255&r,1]}if(t.match(x)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const r=parseInt(t,16);return[r>>24&255,r>>16&255,r>>8&255,Math.round((255&r)/255*100)/100]}throw new Error(`unknown hex color: ${t}`)},s.autodetect.push({p:4,test:(t,...r)=>{if(!r.length&&"string"===e(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}}),a.prototype.hsl=function(){return u(this._rgb)},l.hsl=(...t)=>new a(...t,"hsl"),s.format.hsl=g,s.autodetect.push({p:2,test:(...t)=>{if("array"===e(t=n(t,"hsl"))&&3===t.length)return"hsl"}});var v=18,j=.95047,N=1,E=1.08883,A=.137931034,C=.206896552,F=.12841855,O=.008856452;const{pow:S}=Math,L=t=>(t/=255)<=.04045?t/12.92:S((t+.055)/1.055,2.4),I=t=>t>O?S(t,1/3):t/F+A,q=(t,r,e)=>{t=L(t),r=L(r),e=L(e);return[I((.4124564*t+.3575761*r+.1804375*e)/j),I((.2126729*t+.7151522*r+.072175*e)/N),I((.0193339*t+.119192*r+.9503041*e)/E)]},{pow:B}=Math,D=t=>255*(t<=.00304?12.92*t:1.055*B(t,1/2.4)-.055),R=t=>t>C?t*t*t:F*(t-A);a.prototype.lab=function(){return((...t)=>{const[r,e,o]=n(t,"rgb"),[s,a,l]=q(r,e,o),i=116*a-16;return[i<0?0:i,500*(s-a),200*(a-l)]})(this._rgb)},l.lab=(...t)=>new a(...t,"lab"),s.format.lab=(...t)=>{t=n(t,"lab");const[r,e,o]=t;let s,a,l,i,u,c;return a=(r+16)/116,s=isNaN(e)?a:a+e/500,l=isNaN(o)?a:a-o/200,a=N*R(a),s=j*R(s),l=E*R(l),i=D(3.2404542*s-1.5371385*a-.4985314*l),u=D(-.969266*s+1.8760108*a+.041556*l),c=D(.0556434*s-.2040259*a+1.0572252*l),[i,u,c,t.length>3?t[3]:1]},s.autodetect.push({p:2,test:(...t)=>{if("array"===e(t=n(t,"lab"))&&3===t.length)return"lab"}});const{cbrt:U,pow:z,sign:G}=Math;function H(t){const r=Math.abs(t);return r<.04045?t/12.92:(G(t)||1)*z((r+.055)/1.055,2.4)}const{pow:J,sign:K}=Math;function P(t){const r=Math.abs(t);return r>.0031308?(K(t)||1)*(1.055*J(r,1/2.4)-.055):12.92*t}a.prototype.oklab=function(){return((...t)=>{const[r,e,o]=n(t,"rgb"),[s,a,l]=[H(r/255),H(e/255),H(o/255)],i=U(.4122214708*s+.5363325363*a+.0514459929*l),u=U(.2119034982*s+.6806995451*a+.1073969566*l),c=U(.0883024619*s+.2817188376*a+.6299787005*l);return[.2104542553*i+.793617785*u-.0040720468*c,1.9779984951*i-2.428592205*u+.4505937099*c,.0259040371*i+.7827717662*u-.808675766*c]})(this._rgb)},l.oklab=(...t)=>new a(...t,"oklab"),s.format.oklab=(...t)=>{t=n(t,"lab");const[r,e,o]=t,s=J(r+.3963377774*e+.2158037573*o,3),a=J(r-.1055613458*e-.0638541728*o,3),l=J(r-.0894841775*e-1.291485548*o,3);return[255*P(4.0767416621*s-3.3077115913*a+.2309699292*l),255*P(-1.2684380046*s+2.6097574011*a-.3413193965*l),255*P(-.0041960863*s-.7034186147*a+1.707614701*l),t.length>3?t[3]:1]},s.autodetect.push({p:3,test:(...t)=>{if("array"===e(t=n(t,"oklab"))&&3===t.length)return"oklab"}});const{round:Q}=Math;a.prototype.rgb=function(t=!0){return!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Q)},a.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map(((r,e)=>e<3?!1===t?r:Q(r):r))},l.rgb=(...t)=>new a(...t,"rgb"),s.format.rgb=(...t)=>{const r=n(t,"rgba");return void 0===r[3]&&(r[3]=1),r},s.autodetect.push({p:3,test:(...t)=>{if("array"===e(t=n(t,"rgba"))&&(3===t.length||4===t.length&&"number"==e(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});const{round:T}=Math;a.prototype.android=function(t){return((...t)=>{const r=n(t,"rgba");let e=(1!==r[3]?o(t):"rgb")||"rgb";return r[0]=T(r[0]),r[1]=T(r[1]),r[2]=T(r[2]),("rgba"===e||r.length>3&&r[3]<1&&"rgb"!==o(t))&&(r[3]=r.length>3?r[3]:1,e="rgba"),"rgba"===e?r[3]<<24|r[0]<<16|r[1]<<8|r[2]:4278190080|r[0]<<16|r[1]<<8|r[2]})(this._rgb,t)},l.android=(...t)=>new a(...t,"android"),s.format.android=t=>{if("number"==e(t)){const r=(t>>24&255)/255;if(r>=0&&r<=1){const e=t-4278190080;return[e>>16&255,e>>8&255,255&e,r]}}throw new Error("unknown android color: "+t)},s.autodetect.push({p:5,test:(...t)=>{if(1===t.length&&"number"===e(t[0])){const r=(t[0]>>24&255)/255;if(r>=0&&r<=1){const r=t[0]-4278190080;if([r>>16&255,r>>8&255,255&r].every((t=>t>=0&&t<=255)))return"android"}}}}),a.prototype.alpha=function(t,r=!1){return void 0!==t&&"number"===e(t)?r?(this._rgb[3]=t,this):new a([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},a.prototype.darken=function(t=1){const r=this.lab();return r[0]-=v*t,new a(r,"lab").alpha(this.alpha(),!0)},a.prototype.brighten=function(t=1){return this.darken(-t)},a.prototype.darker=a.prototype.darken,a.prototype.brighter=a.prototype.brighten,a.prototype.get=function(t){const[r,e]=t.split("."),n=this[r]();if(e){const t=r.indexOf(e)-("ok"===r.substr(0,2)?2:0);if(t>-1)return n[t];throw new Error(`unknown channel ${e} in mode ${r}`)}return n};var V={},W=(t,r,n=.5,...o)=>{let s=o[0]||"lrgb";if(V[s]||o.length||(s=Object.keys(V)[0]),!V[s])throw new Error(`interpolation mode ${s} is not defined`);return"object"!==e(t)&&(t=new a(t)),"object"!==e(r)&&(r=new a(r)),V[s](t,r,n).alpha(t.alpha()+n*(r.alpha()-t.alpha()))};a.prototype.mix=a.prototype.interpolate=function(t,r=.5,...e){return W(this,t,r,...e)},a.prototype.set=function(t,r,n=!1){const[o,s]=t.split("."),l=this[o]();if(s){const t=o.indexOf(s)-("ok"===o.substr(0,2)?2:0);if(t>-1){if("string"==e(r))switch(r.charAt(0)){case"+":case"-":l[t]+=+r;break;case"*":l[t]*=+r.substr(1);break;case"/":l[t]/=+r.substr(1);break;default:l[t]=+r}else{if("number"!==e(r))throw new Error("unsupported value for Color.set");l[t]=r}const s=new a(l,o);return n?(this._rgb=s._rgb,this):s}throw new Error(`unknown channel ${s} in mode ${o}`)}return l};const{sqrt:X,pow:Y}=Math;V.lrgb=(t,r,e)=>{const[n,o,s]=t._rgb,[l,i,u]=r._rgb;return new a(X(Y(n,2)*(1-e)+Y(l,2)*e),X(Y(o,2)*(1-e)+Y(i,2)*e),X(Y(s,2)*(1-e)+Y(u,2)*e),"rgb")};V.oklab=(t,r,e)=>{const n=t.oklab(),o=r.oklab();return new a(n[0]+e*(o[0]-n[0]),n[1]+e*(o[1]-n[1]),n[2]+e*(o[2]-n[2]),"oklab")};l.mix=l.interpolate=W,l.valid=(...t)=>{try{return new a(...t),!0}catch(t){return!1}};export{l as default};
