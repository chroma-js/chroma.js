const t=(t,r=0,e=1)=>t<r?r:t>e?e:t,r={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])r[`[object ${t}]`]=t.toLowerCase();function e(t){return r[Object.prototype.toString.call(t)]||"object"}const n=(t,r=null)=>t.length>=3?Array.prototype.slice.call(t):"object"==e(t[0])&&r?r.split("").filter((r=>void 0!==t[0][r])).map((r=>t[0][r])):t[0],o=t=>{if(t.length<2)return null;const r=t.length-1;return"string"==e(t[r])?t[r].toLowerCase():null},s={format:{},autodetect:[]};class a{constructor(...r){const n=this;if("object"===e(r[0])&&r[0].constructor&&r[0].constructor===this.constructor)return r[0];let a=o(r),l=!1;if(!a){l=!0,s.sorted||(s.autodetect=s.autodetect.sort(((t,r)=>r.p-t.p)),s.sorted=!0);for(let t of s.autodetect)if(a=t.test(...r),a)break}if(!s.format[a])throw new Error("unknown format: "+r);{const e=s.format[a].apply(null,l?r:r.slice(0,-1));n._rgb=(r=>{r._clipped=!1,r._unclipped=r.slice(0);for(let e=0;e<=3;e++)e<3?((r[e]<0||r[e]>255)&&(r._clipped=!0),r[e]=t(r[e],0,255)):3===e&&(r[e]=t(r[e],0,1));return r})(e)}3===n._rgb.length&&n._rgb.push(1)}toString(){return"function"==e(this.hex)?this.hex():`[${this._rgb.join(",")}]`}}const l=(...t)=>new l.Color(...t);l.Color=a,l.version="@@version";const i=t=>Math.round(100*t)/100,c=(...t)=>{t=n(t,"rgba");let[r,e,o]=t;r/=255,e/=255,o/=255;const s=Math.min(r,e,o),a=Math.max(r,e,o),l=(a+s)/2;let i,c;return a===s?(i=0,c=Number.NaN):i=l<.5?(a-s)/(a+s):(a-s)/(2-a-s),r==a?c=(e-o)/(a-s):e==a?c=2+(o-r)/(a-s):o==a&&(c=4+(r-e)/(a-s)),c*=60,c<0&&(c+=360),t.length>3&&void 0!==t[3]?[c,i,l,t[3]]:[c,i,l]},{round:u}=Math,h=(...t)=>{const r=n(t,"rgba");let e=o(t)||"rgb";return"hsl"==e.substr(0,3)?((...t)=>{const r=n(t,"hsla");let e=o(t)||"lsa";return r[0]=i(r[0]||0),r[1]=i(100*r[1])+"%",r[2]=i(100*r[2])+"%","hsla"===e||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,e="hsla"):r.length=3,`${e}(${r.join(",")})`})(c(r),e):(r[0]=u(r[0]),r[1]=u(r[1]),r[2]=u(r[2]),("rgba"===e||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,e="rgba"),`${e}(${r.slice(0,"rgb"===e?3:4).join(",")})`)},{round:b}=Math,g=(...t)=>{t=n(t,"hsl");const[r,e,o]=t;let s,a,l;if(0===e)s=a=l=255*o;else{const t=[0,0,0],n=[0,0,0],i=o<.5?o*(1+e):o+e-o*e,c=2*o-i,u=r/360;t[0]=u+1/3,t[1]=u,t[2]=u-1/3;for(let r=0;r<3;r++)t[r]<0&&(t[r]+=1),t[r]>1&&(t[r]-=1),6*t[r]<1?n[r]=c+6*(i-c)*t[r]:2*t[r]<1?n[r]=i:3*t[r]<2?n[r]=c+(i-c)*(2/3-t[r])*6:n[r]=c;[s,a,l]=[b(255*n[0]),b(255*n[1]),b(255*n[2])]}return t.length>3?[s,a,l,t[3]]:[s,a,l,1]},p=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,d=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,f=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,w=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,m=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,y=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,{round:k}=Math,$=t=>{let r;if(t=t.toLowerCase().trim(),s.format.named)try{return s.format.named(t)}catch(t){}if(r=t.match(p)){const t=r.slice(1,4);for(let r=0;r<3;r++)t[r]=+t[r];return t[3]=1,t}if(r=t.match(d)){const t=r.slice(1,5);for(let r=0;r<4;r++)t[r]=+t[r];return t}if(r=t.match(f)){const t=r.slice(1,4);for(let r=0;r<3;r++)t[r]=k(2.55*t[r]);return t[3]=1,t}if(r=t.match(w)){const t=r.slice(1,5);for(let r=0;r<3;r++)t[r]=k(2.55*t[r]);return t[3]=+t[3],t}if(r=t.match(m)){const t=r.slice(1,4);t[1]*=.01,t[2]*=.01;const e=g(t);return e[3]=1,e}if(r=t.match(y)){const t=r.slice(1,4);t[1]*=.01,t[2]*=.01;const e=g(t);return e[3]=+r[4],e}};$.test=t=>p.test(t)||d.test(t)||f.test(t)||w.test(t)||m.test(t)||y.test(t),a.prototype.css=function(t){return h(this._rgb,t)},l.css=(...t)=>new a(...t,"css"),s.format.css=$,s.autodetect.push({p:5,test:(t,...r)=>{if(!r.length&&"string"===e(t)&&$.test(t))return"css"}});const{round:_}=Math,x=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,M=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;a.prototype.hex=function(t){return((...t)=>{let[r,e,s,a]=n(t,"rgba"),l=o(t)||"auto";void 0===a&&(a=1),"auto"===l&&(l=a<1?"rgba":"rgb"),r=_(r),e=_(e),s=_(s);let i="000000"+(r<<16|e<<8|s).toString(16);i=i.substr(i.length-6);let c="0"+_(255*a).toString(16);switch(c=c.substr(c.length-2),l.toLowerCase()){case"rgba":return`#${i}${c}`;case"argb":return`#${c}${i}`;default:return`#${i}`}})(this._rgb,t)},l.hex=(...t)=>new a(...t,"hex"),s.format.hex=t=>{if(t.match(x)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const r=parseInt(t,16);return[r>>16,r>>8&255,255&r,1]}if(t.match(M)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const r=parseInt(t,16);return[r>>24&255,r>>16&255,r>>8&255,Math.round((255&r)/255*100)/100]}throw new Error(`unknown hex color: ${t}`)},s.autodetect.push({p:4,test:(t,...r)=>{if(!r.length&&"string"===e(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}}),a.prototype.hsl=function(){return c(this._rgb)},l.hsl=(...t)=>new a(...t,"hsl"),s.format.hsl=g,s.autodetect.push({p:2,test:(...t)=>{if("array"===e(t=n(t,"hsl"))&&3===t.length)return"hsl"}});const j=18,v=.95047,N=1,A=1.08883,C=.137931034,E=.206896552,F=.12841855,O=.008856452,{pow:S}=Math,L=t=>(t/=255)<=.04045?t/12.92:S((t+.055)/1.055,2.4),I=t=>t>O?S(t,1/3):t/F+C,q=(t,r,e)=>{t=L(t),r=L(r),e=L(e);return[I((.4124564*t+.3575761*r+.1804375*e)/v),I((.2126729*t+.7151522*r+.072175*e)/N),I((.0193339*t+.119192*r+.9503041*e)/A)]},{pow:B}=Math,D=t=>255*(t<=.00304?12.92*t:1.055*B(t,1/2.4)-.055),R=t=>t>E?t*t*t:F*(t-C);a.prototype.lab=function(){return((...t)=>{const[r,e,o]=n(t,"rgb"),[s,a,l]=q(r,e,o),i=116*a-16;return[i<0?0:i,500*(s-a),200*(a-l)]})(this._rgb)},l.lab=(...t)=>new a(...t,"lab"),s.format.lab=(...t)=>{t=n(t,"lab");const[r,e,o]=t;let s,a,l,i,c,u;return a=(r+16)/116,s=isNaN(e)?a:a+e/500,l=isNaN(o)?a:a-o/200,a=N*R(a),s=v*R(s),l=A*R(l),i=D(3.2404542*s-1.5371385*a-.4985314*l),c=D(-.969266*s+1.8760108*a+.041556*l),u=D(.0556434*s-.2040259*a+1.0572252*l),[i,c,u,t.length>3?t[3]:1]},s.autodetect.push({p:2,test:(...t)=>{if("array"===e(t=n(t,"lab"))&&3===t.length)return"lab"}});const{cbrt:U,pow:z,sign:G}=Math;function H(t){const r=Math.abs(t);return r<.04045?t/12.92:(G(t)||1)*z((r+.055)/1.055,2.4)}const{pow:J,sign:K}=Math;function P(t){const r=Math.abs(t);return r>.0031308?(K(t)||1)*(1.055*J(r,1/2.4)-.055):12.92*t}a.prototype.oklab=function(){return((...t)=>{const[r,e,o]=n(t,"rgb"),[s,a,l]=[H(r/255),H(e/255),H(o/255)],i=U(.4122214708*s+.5363325363*a+.0514459929*l),c=U(.2119034982*s+.6806995451*a+.1073969566*l),u=U(.0883024619*s+.2817188376*a+.6299787005*l);return[.2104542553*i+.793617785*c-.0040720468*u,1.9779984951*i-2.428592205*c+.4505937099*u,.0259040371*i+.7827717662*c-.808675766*u]})(this._rgb)},l.oklab=(...t)=>new a(...t,"oklab"),s.format.oklab=(...t)=>{t=n(t,"lab");const[r,e,o]=t,s=J(r+.3963377774*e+.2158037573*o,3),a=J(r-.1055613458*e-.0638541728*o,3),l=J(r-.0894841775*e-1.291485548*o,3);return[255*P(4.0767416621*s-3.3077115913*a+.2309699292*l),255*P(-1.2684380046*s+2.6097574011*a-.3413193965*l),255*P(-.0041960863*s-.7034186147*a+1.707614701*l),t.length>3?t[3]:1]},s.autodetect.push({p:3,test:(...t)=>{if("array"===e(t=n(t,"oklab"))&&3===t.length)return"oklab"}});const{round:Q}=Math;a.prototype.rgb=function(t=!0){return!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Q)},a.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map(((r,e)=>e<3?!1===t?r:Q(r):r))},l.rgb=(...t)=>new a(...t,"rgb"),s.format.rgb=(...t)=>{const r=n(t,"rgba");return void 0===r[3]&&(r[3]=1),r},s.autodetect.push({p:3,test:(...t)=>{if("array"===e(t=n(t,"rgba"))&&(3===t.length||4===t.length&&"number"==e(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}}),a.prototype.alpha=function(t,r=!1){return void 0!==t&&"number"===e(t)?r?(this._rgb[3]=t,this):new a([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},a.prototype.darken=function(t=1){const r=this.lab();return r[0]-=j*t,new a(r,"lab").alpha(this.alpha(),!0)},a.prototype.brighten=function(t=1){return this.darken(-t)},a.prototype.darker=a.prototype.darken,a.prototype.brighter=a.prototype.brighten,a.prototype.get=function(t){const[r,e]=t.split("."),n=this[r]();if(e){const t=r.indexOf(e)-("ok"===r.substr(0,2)?2:0);if(t>-1)return n[t];throw new Error(`unknown channel ${e} in mode ${r}`)}return n};const T={},V=(t,r,n=.5,...o)=>{let s=o[0]||"lrgb";if(T[s]||o.length||(s=Object.keys(T)[0]),!T[s])throw new Error(`interpolation mode ${s} is not defined`);return"object"!==e(t)&&(t=new a(t)),"object"!==e(r)&&(r=new a(r)),T[s](t,r,n).alpha(t.alpha()+n*(r.alpha()-t.alpha()))};a.prototype.mix=a.prototype.interpolate=function(t,r=.5,...e){return V(this,t,r,...e)},a.prototype.set=function(t,r,n=!1){const[o,s]=t.split("."),l=this[o]();if(s){const t=o.indexOf(s)-("ok"===o.substr(0,2)?2:0);if(t>-1){if("string"==e(r))switch(r.charAt(0)){case"+":case"-":l[t]+=+r;break;case"*":l[t]*=+r.substr(1);break;case"/":l[t]/=+r.substr(1);break;default:l[t]=+r}else{if("number"!==e(r))throw new Error("unsupported value for Color.set");l[t]=r}const s=new a(l,o);return n?(this._rgb=s._rgb,this):s}throw new Error(`unknown channel ${s} in mode ${o}`)}return l};const{sqrt:W,pow:X}=Math;T.lrgb=(t,r,e)=>{const[n,o,s]=t._rgb,[l,i,c]=r._rgb;return new a(W(X(n,2)*(1-e)+X(l,2)*e),W(X(o,2)*(1-e)+X(i,2)*e),W(X(s,2)*(1-e)+X(c,2)*e),"rgb")};T.oklab=(t,r,e)=>{const n=t.oklab(),o=r.oklab();return new a(n[0]+e*(o[0]-n[0]),n[1]+e*(o[1]-n[1]),n[2]+e*(o[2]-n[2]),"oklab")};l.mix=l.interpolate=V,l.valid=(...t)=>{try{return new a(...t),!0}catch(t){return!1}};export{l as default};
